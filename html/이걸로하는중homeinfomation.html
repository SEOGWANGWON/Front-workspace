<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>우리 회사 홈페이지</title>
    <style>
        
        html{
            background-color: black;
        }
        body{
            background-color: rgb(46, 46, 46);
            width: 65%;
            margin: 5px 5px 17.5% 17.5%;
            
        }
        *{ /* 전체 설정 */
            box-sizing: border-box; /* 이쁘게 box로 모음*/
        }
        div{
            background-color: #6b5597b0;
            padding: 2px;
            float: right;
            width: 49%;
            height: 95%;
            color: white;
            margin-right: 2%;
            border: 3px solid white;
        }

        nav{
             /* float: left; 왼쪽으로 위치*/
            width: 150px;
            height: 300px;
            background-color: rgb(46, 46, 46);
            padding: 0;
            border: 2px solid rgb(71, 71, 71);
            margin-left: 10%;
        }
        nav ul{
            list-style-type: none;
            padding: 0px;
        }
        article{
            float: left;
            padding: 20px;
            width: 70%;
            background-color: #f1f1f1;
            height: 300px;
        }
        /* 여기중요*/
        section::after{
            content: "";
            display: table;
            clear: both;
        }
        footer{
            background-color: #cfff33;
            padding: 10px;
            text-align: center;
            color: black;
            
        }
        @media (max-width:600px){ /* 모바일 버전으로 볼때*/
            nav,article{
                width: 100%;
                height: auto;
        }
    }
    img{
        height: auto;       /* 높이는 자동으로 조절되어 가로 세로 비율을 유지함 */
        max-width: 100%;    /* 이미지의 최대 너비를 부모 요소의 100%로 설정 */
        margin: 0 auto;     /* 이미지를 가운데 정렬하기 위한 마진 설정 */
        display: block;     /* 이미지를 블록 요소로 설정하여 레이아웃에 영향을 줌 */
    }
       

    </style>
</head>
<body>
    <h2 style="text-align: center; color: rgb(223, 220, 220);">시경위키</h2>
    <p style="text-align: center; color: rgb(223, 220, 220);">해보고 싶어서 만든 짭퉁위키</p>
    <div>
        <h2 style="text-align: center; height: 15px; padding: 0;" >성시경<br>
            <h3 style="text-align: center; height: 15px;  padding: 0;">成始璄[훈음] ｜ Sung Si Kyung</h3></h2>
        <a href="https://namu.wiki/w/%EC%84%B1%EC%8B%9C%EA%B2%BD"><img src="https://i.namu.wiki/i/s1rTzvamx_U6nXUP0OMBaXQnZEEclAvbiI9BGyetsjqxZK193y4BvP22qlGYieyBiopghTi21Bt-E1-ULAqRYSeRBGr8bvWNnLPGpR_NA7jWNLqbFZPG3vRfDxwVJmuV_o_cPnqcvIo8RUYvAkfbYA.webp"></a>
    </div>
    <section> <!-- 보통 회사에서 되어있는 구조 -->
        <nav>
            <h1 style="color: rgb(223, 220, 220); padding: 3px; margin-left: 10px;">목차</h1>
            <ul id="post-list">
                
            </ul>
        </nav>
   
        <article style="margin: 0 0 15% 15%; margin-top: 20%;"> <!-- 컨텐츠를 나타낼때 쓰임-->
             <h1>회사의위대함</h1>
             <p>우리 회사는 위대하고 위대한 회사이다.<br>
            위대함이 하늘 부끄러움 없이 위대하다.</p>
            <h2>게시글 작성</h2>
            <button id="add-post">게시글 작성</button>
            <!--
            <div id="post-form">
                <input type="text" id="post-title" placeholder="제목">
                <textarea id="post-content" placeholder="내용"></textarea>--> <!--내용적는곳에 보통 content 라고 많이씀 -->
              <!--  <button id="save-post">저장</button>
            </div>
        -->
        </article>
    </section> <!-- 세션-->
    <script>
        function displayPosts() {
            const postList = document.getElementById('post-list');
            postList.innerHTML = '';

            for (let i = 0; i < localStorage.length; i++){
                const key = localStorage.key(i);

                if (key.startsWith('post-')){
                    const post = JSON.parse(localStorage.getItem(key));
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `<a href="#" date-key="${key}">${post.title}</a>`;
                    postList.appendChild(listItem);
                
                }
            }

            const postLinks = document.querySelectorAll('#post-list a');
            postLinks.forEach((link) => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();

                    const key = link.getAttribute('data-key');
                    const post = JSON.parse(localStorage.getItem(key));

                    const popupWindow = window.open('','','width=400, height=400');
                    popupWindow.document.write(`<h2>${post.title}</h2>`);
                    popupWindow.document.write(`<p>${post.content}</p>`);

                });
            });

        }

        document.getElementById('add-post').addEventListener('click', () =>{
            const popupWindow = window.open('','','width=400, height=400');
            const popupDocument = popupWindow.document;

            popupDocument.write('<h2>게시글 작성<h2>');
            popupDocument.write('<input type="text" id="post-title" placeholder="제목" style="width: 250px; height: 25px;" ><br>'); //`를 사용하지않은이유 특수문자 없어서
            popupDocument.write('<textarea id="post-content" placeholder = "내용" style="width: 250px; height: 100px;"></textarea><br>');
            popupDocument.write('<button id="save-post">저장</button>');
            
            popupDocument.getElementById('save-post').addEventListener('click', () => {

                const title = popupDocument.getElementById('post-title').value;
                const content = popupDocument.getElementById('post-content').value;

                if(title && content){

                    const postKey = `post-${Date.now()}`;
                    const post = {title,content};
                    localStorage.setItem(postKey, JSON.stringify(post));
                    displayPosts();
                    popupWindow.close();

                }


            });

        });

        displayPosts();

    </script>


</body>
<footer>
    <p> 회사소개 | 연혁 | 오시는길 | 인재채용 | 고객상담 </p>
</footer>

</html>
